A big opioid settlement and a COVID-19 vaccine slowdown dragged on third-quarter earnings for Walgreens, but the drugstore chain still topped expectations.Net income slid to $289 million in the quarter that ended May 31, the company said Thursday. That’s down from about $1.2 billion the previous year.Walgreens booked a $683 million charge from a settlement announced last month with the state of Florida to resolve claims tied to dispensing prescription opioids.Its U.S. pharmacies also slowed compared with last year, when a COVID-19 vaccination push was bringing more people to its stores. Walgreens administered 4.7 million COVID-19 vaccinations in the quarter, compared with more than 17 million last year. The quarter shows how much Walgreens’ performance has relied on demand for vaccines and COVID-19 testing, which brought more customers into the chain’s stores and led to other product purchases, GlobalData Managing Director Neil Saunders said in an email. ADVERTISEMENT“Now that vaccination and testing rates are falling, Walgreens’ performance is deteriorating.” Saunders wrote. The company also saw a decline in its AllianceRx Walgreens business, which is a specialty and home delivery pharmacy for patients with rare, chronic and complex conditions.COVID-19COVID restrictions ease in Shanghai as case numbers dropCalifornia advances bid to create legal drug injection sitesStocks slump, closing out worst quarter since early 20202nd trial set for Aug. 9 for 2 men charged in Whitmer plotWalgreens posted adjusted earnings of 96 cents per share in the quarter. Total revenue slipped 4% to $32.6 billion. Analysts expected, on average, earnings of 84 cents per share on $32.06 billion in revenue, according to FactSet.Walgreens Boots Alliance Inc., based in Deerfield, Illinois, has a network of more than 13,000 stores. That includes nearly 9,000 locations in the U.S., Puerto Rico and U.S. Virgin Islands as well as nearly 2,300 Boots locations in the United Kingdom and some in Ireland and Thailand as well.The company announced on Tuesday that it had decided to keep its Boots business, which it acquired several years ago in a push to gain global clout. Walgreens CEO Rosalind Brewer told analysts in January that the company would explore strategic options for that business so it could focus more on U.S. health care.Brewer said then that Walgreens was creating an entity “that does much more than just dispense pharmaceuticals.”The company announced the creation of a Walgreens Health business segment last fall. It has been adding primary clinics to some of its stores and pushing more into the delivering of care and helping people stay healthy, like rival CVS Health Corp. and major U.S. health insurers. Selling the Boots business would have given Walgreens more financial flexibility and allowed its leaders to focus on these newer initiatives, Edward Jones analyst John Boylan said in an email.He added that keeping the Boots business “could modestly complicate the process.” Company shares slid nearly 4% to $39.27 after markets opened Thursday and broader indexes also sank. ___Follow Tom Murphy on Twitter: https://twitter.com/thpmurphy