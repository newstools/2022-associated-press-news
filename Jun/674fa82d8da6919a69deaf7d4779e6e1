WASHINGTON (AP) — Democratic and Republican senators were at odds Thursday over how to keep firearms from dangerous people as bargainers struggled to finalize details of a gun violence compromise in time for their self-imposed deadline of holding votes in Congress next week.Lawmakers said they remained divided over how to define abusive dating partners who would be legally barred from purchasing firearms. Disagreements were also unresolved over proposals to send money to states that have “red flag” laws that let authorities temporarily confiscate guns from people deemed dangerous by courts, and to other states for their own violence prevention programs.The election-year talks have seemed headed toward agreement, with both parties fearing punishment by voters if Congress doesn’t react to the carnage of last month’s mass shootings. A total of 31 people were slain at a grocery store in Buffalo, New York, and an elementary school in Uvalde, Texas. An outline of a deal has been endorsed by President Joe Biden, Senate Majority Leader Chuck Schumer, D-N.Y., Senate Minority Leader Mitch McConnell, R-Ky., and House Speaker Nancy Pelosi, D-Calif. ADVERTISEMENTSen. John Cornyn of Texas, a lead GOP bargainer, seemed visibly unhappy as he left Thursday’s closed-door session after nearly two hours, saying he was flying home. “This is the hardest part because at some point, you just got to make a decision. And when people don’t want to make a decision, you can’t accomplish the result. And that’s kind of where we are right now,” Cornyn said. “I’m not frustrated, I’m done,” he added, though he said he was open to continued discussions. Lawmakers have said a deal must be completed and written into legislative language by week’s end if Congress is to vote by next week. It begins a July 4 recess after that. Leaders want votes by then because Washington has a long record of talking about reacting to mass shootings, only to see lawmakers’ and voters’ interest fade quickly over time. Other bargainers seemed more optimistic, saying much of the overall package has been agreed to and aides were drafting bill language. “A deal like this is difficult,” Sen. Chris Murphy, D-Conn., said when the meeting ended. “It comes with a lot of emotions, it comes with political risk to both sides. But we’re close enough that we should be able to get there.” The measure would impose just small-scale curbs on firearms. It lacks proposals by Biden and Democrats to prohibit assault-style weapons and high-capacity ammunition magazines like the ones used in Buffalo and Uvalde, or to raise the legal age for purchasing assault rifles from 18 to 21. Even so, it would be Congress’ most robust move against gun violence since 1993. A ban lawmakers enacted that year on assault weapons took effect in 1994 and expired after a decade. Scores of high-profile mass shootings since have yielded little from Washington but partisan deadlock, chiefly due to Republicans blocking virtually any new restrictions. Federal law bars people convicted of domestic violence against a spouse from acquiring guns, but leaves a loophole for other romantic relationships. Everytown for Gun Safety, which advocates firearms curbs, says 31 states bar convicted domestic abusers from buying firearms, including 19 that cover violent dating partners.ADVERTISEMENTSenators have disagreed over how to define such relationships, with Republicans working against a broad provision. Sen. Thom Tillis of North Carolina, the other lead GOP negotiator, said bargainers would use some state statutes as their guide, though their laws vary.“You need to make sure that you’re capturing everyone that actually beat” up their girlfriends, said Murphy, a Democrat.In addition, 19 states and the District of Columbia have “red flag” laws. Cornyn and the other lead bargainer, Sen. Kyrsten Sinema, D-Ariz., represent states that do not, and it is unclear how money in the bill would be divided among them. Senators have not said what the measure’s overall price tag will be, though people following the talks have said they expect it to range around $15 billion or $20 billion. Lawmakers are looking for budget cuts to pay for those costs. Twenty senators, 10 from each party, agreed to the outlines of a compromise measure last weekend. Top bargainers have labored ever since to translate it into details.ADVERTISEMENTThe framework includes access to the juvenile records of gun buyers age 18 to 20. Both shooters in Buffalo and Uvalde were 18, and both used AR-15 style automatic rifles, which can load high-capacity magazines.The plan also includes added spending for mental health and school safety programs, tougher penalties for gun trafficking and requirements that slightly more gun dealers obtain federal firearms licenses.