UVALDE, Texas (AP) — Monday morning at Robb Elementary School, a line of graduating high school seniors in maroon caps and gowns paid a visit to the children to offer smiles, high fives and encouragement that one day, if they studied hard enough, they could graduate too. Notably missing from those Uvalde High School seniors was 18-year-old Salvador Ramos, who had frequently skipped class and was not set to graduate. The next day, he shot his grandmother and then went to the school alone with an AR-style rifle and fatally shot 19 children and two teachers for reasons authorities are still at a loss to explain. State police say Ramos had no criminal record, no history of mental illness treatment and no obvious signs he was a danger to this tight-knit, largely Latino community 85 miles west of San Antonio. But those who knew him saw increasing signs of isolation, outbursts and aggression. And there were a series of cryptic social media messages -- including to apparently random teenage girls in Germany and California -- that offered photos of rifles, ammo and hints of his desire to hurt and kill. ADVERTISEMENT“He always seemed to take his anger out on the most innocent person in the room,” said 17-year-old Crystal Foutz, who attended school with Ramos and worked with him at the fast-food chain Whataburger. “He would get angry at people thinking he wasn’t OK. He was just always super odd.”Most chilling were a series of messages on the social platform Yubo just before Tuesday’s shooting that may have come too late to prevent the violence. Investigators are examining texts they believe Ramos sent to a 15-year-old German girl, including one minutes before the massacre warning that he was about “to shoot up a elementary school,” according to a law enforcement official not authorized to discuss the matter who spoke to The Associated Press on condition of anonymity.Instagram photos posted under his moniker TheBiggestOpp showed him in front of a mirror taking a selfie and one of a gun magazine in his lap. Earlier this month, Ramos tagged a photo of two long guns to an Instagram user with more than 10,000 followers and asked her to share the picture. “I barely know you and u tag me in a picture with some guns,” replied the Instagram user, a young woman in California. “It’s just scary.”On May 17, a day after he turned 18, he visited a gun store to buy an AR-style rifle. He bought a second one a few days later.On the day of the shooting, Ramos replied that he’s “got a lil secret,” according to the exchange of messages posted publicly. He later typed: “I’m about to.”A TikTok account with the same selfie photo and username included a chilling line in its profile: “Kids be scared IRL,” short for “in real life.”Neighbors and classmates say that in recent years Ramos got into fights with his mother repeatedly, including times when the police were called in.Some of them say that the seeds of Ramos’ descent to mass murder may have started many years ago as a child who always had trouble fitting in with others, was an occasional target of bullies and then turned into one himself.ADVERTISEMENTOne childhood friend recalled a time Ramos admitted to cutting his own face with knives for fun. The same friend, Santos Valdez Jr., 18, told The Washington Post that Ramos would drive around at night egging cars and shooting random people with a BB gun. About a year ago, he said, Ramos posted a “wish list” on social media of automatic rifles.Foutz, the former classmate, said Ramos had become increasingly withdrawn in recent months, having “slowly fallen off” from attending school, and got into angry disputes with her ex-boyfriend and a couple at Whataburger.“He wasn’t a big guy,” she told AP. “He just had this ego. Like he was invincible.”“He was really a loner, and the people he did hang out with stopped hanging with him because of those things,” she said.On the morning of the shooting, Gilbert Gallegos, 82, who lives across the street from Ramos and his grandmother, heard a shot as he was puttering around in his yard. He ran to the front and saw Ramos speed away in a truck and his grandmother bloodied coming toward him, pleading for help.Ramos’ grandmother emerged covered in blood: “She says, ‘Berto, this is what he did. He shot me.’” ADVERTISEMENTMinutes later, Ramos crashed the truck in a drainage ditch near the school and began an assault that would go on for more than an hour before he was finally gunned down himself by authorities. Foutz said that unlike other mass shooters, who gave no sign of their intentions, Ramos was sending out signals that should have been caught.  “Looking at it now, he’s textbook,” she said. “It could have been prevented. It should have been prevented.”___Condon and Mustian reported from New York. AP writers Acacia Coronado in Uvalde, Michael Balsamo and Amanda Seitz in Washington, and news researcher Rhonda Shafner in New York contributed to this report. ___Contact AP’s global investigative team at Investigative@ap.org.